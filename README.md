# Document the documentation

The complete Ansible tree is documented using the _MKDocs_ documentation
system. All documentation is done in MarkDown, with a bit of MKDocs flavour
added.

And as all documentation is in Markdown with the
[mkdocs](https://www.mkdocs.org/) flavour, the `mkdocs` package needs to
be installed.

```.none
pip install markdown
pip install mkdocs
```

## Generate

Every Ansible role has the complete documentation in it's own `README.md` file
and these `README.md` files are gathered with the `bin/refresh` script.

This way the documentation is in the role and chances are it is kept up to date.

## View

Viewing the documentation can be done in multiple ways, which are all web-based.

- Internal webserver
- External webserver

### Internal webserver

The `mkdocs` command contains an integrated webserver, that can be started
with:

```.none
mkdocs serve
```

Now you can point your browser to the documentation site:
[http://docserver:8000](http://docserver:8000)

### External webserver

When you already have a webserver, this can be used to display all documentation.
Of course you can create a separate virtual host or just host the documentation
in a separate directory.

The command

```.none
mkdocs build
```

creates a complete tree of all documentation in the `site` directory.

## Docs As A Service

To run MKDocs as a service create a _systemd_ service file in
`/etc/systemd/system/mkdocs.service` containing

```
[Unit]
Description=MKDocs
After=network.target

[Service]
Type=simple
User=root
Group=root
TimeoutStartSec=0
Restart=on-failure
RestartSec=10
RemainAfterExit=yes
WorkingDirectory=/etc/ansible/roles/docs
ExecStart=/bin/mkdocs serve

[Install]
WantedBy=multi-user.target
```

And enable and start the service

```
systemctl daemon-reload
systemctl enable mkdocs
systemctl start mkdocs
```

And open the firewall

```
firewall-cmd --add-port=8000/tcp --permanent
firewall-cmd --reload
```

## Missing fonts

There is something weird with the `fontawesome-webfont` font package.
On CentOS the file `fontawesome-webfont.svg` is missing. This file
is placed in the `fonts` directory and should be copied to the
`/usr/share/fonts/fontawesome` directory on the server running MKDocs.


![Author](https://img.shields.io/badge/guru-Ton%20Kersten-blue?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAABiWlDQ1BHSU1QIGJ1aWx0LWluIHNSR0IAACiRfdA9aFMBFAXg770okdLawQwiHd4QBcGCqEjHGoUgVAixQhIdTF7aNJCXhvzg0lFwLTj4s1h1cHHW1cFVEAR/QNzcnBRdpMQhgQQxnulw7jmXew/hXitOegdOk7T73WI+F5XKlSj9Vdphc05aqca9zoVCYc1M/HovgHfLrTjpzfb9Ewv1jV5MEGE17nT7BDdx/la/0ye4j0y8Va0TPMepbqlcIfiITG3EvyHTKJUrhJDprhcvEmYQNaZ4bYrHW92E8Byy9aRdJyyNeL1OuINs0hrE4zsDzG+0r11FFkvyLruiIFIz0NTSt6ypLdJTlJebkT+GJQUDNS1Nscgl2xJVTW1K5Ur0d7e9zbNnRpvmcxz8Mhz+OE76Lvu7w+Hvx8Ph/hNSn3nVnuS391j5SWp3omUfsXibF68nWu0eL+9w9FOn2q2CFMLNTb4/Y6HMkbfMXR/1Np57+oH1Hdbe8OAhJxos3pjx96Hp3v7rGff3B6wscr6aZnFJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGuWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4xLWMwMDAgNzkuZWRhMmIzZmFjLCAyMDIxLzExLzE3LTE3OjIzOjE5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjY2MmYyYzBiLWZjOTEtNDQ0Ny05Nzk4LWU3NDQ5YWQwNmFlYiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpmNTQ0OTM4OS00YzcwLTQ0ZjgtYWRlMy0wZDVjNTg4NmRkNTEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiZjU3YmI0Ny0yNTFlLTQ2YjItODI4NC0yNzYyODc5ZjcyZTQiIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgR0lNUDpBUEk9IjIuMCIgR0lNUDpQbGF0Zm9ybT0iTGludXgiIEdJTVA6VGltZVN0YW1wPSIxNjI2MjU5NzAxMDgwNTA1IiBHSU1QOlZlcnNpb249IjIuMTAuMjQiIHhtcDpDcmVhdG9yVG9vbD0iR0lNUCAyLjEwIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMi0wMS0yMVQxMDo1Njo1OSswMTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjItMDEtMjFUMTA6NTk6MTArMDE6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjItMDEtMjFUMTA6NTk6MTArMDE6MDAiIHRpZmY6T3JpZW50YXRpb249IjEiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJHSU1QIGJ1aWx0LWluIHNSR0IiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6Y2hhbmdlZD0iLyIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1ZmQwY2FmNC05OWFhLTQ4OTQtODM4Zi00MjUxMTU0NTNhMTciIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIiBzdEV2dDp3aGVuPSIyMDIxLTA3LTE0VDEyOjQ4OjIxKzAyOjAwIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmNTQ0OTM4OS00YzcwLTQ0ZjgtYWRlMy0wZDVjNTg4NmRkNTEiIHN0RXZ0OndoZW49IjIwMjItMDEtMjFUMTA6NTk6MTArMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMy4xIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pho8plcAAAJqSURBVCiRhZJLSBRxAMZ//92ZnVlxdhVdzUdbm5YV0Us9dCjDR0JEHexxKEQoDPMgVnch6NxJyi7RJaFCiDDLUigKOiQkhuajTQvLXFsddZvHzjodKulg9N1/H3wPsfvGGwQghCBmJPNtO3WhKEOpDWlKCUBsyXo/sWA9UXze9pBfnnFdFxeQBOAK+KSbp3dm+dvPl+YFKyMZhAIqALO6Wd7/caG8Y+Br81DcaA4H1U7huoi9HQNMLZgnatYH7t48tgUtzcdasuwUDV0j9H5erNsYVLtE4bXX6yLp8vSz+l0en8+7JrSqlRUqbr11okvJAsm0nYuX90VWoSvtr9A0hdb6Mu4MzXK1d5yD8SXG/QpV1ZtpKcuXWvonWz0lmf7DlZFMAEbiBm3d4/QP6wDkBHzkaSoPozpfzBVkyUtNUSZFQeWwlK0p4fQ0GYC2vigbKoqpKSvm5ZRJ9YYMqhtLKTQcmg6Ead6TB4CmSmGP67oCYHB6kXsDX+mo28bx8lyej+rYKUg5Dt5kioTprEb1CPAsW87kcsKmqWeC7QUatcVZ5AcEiizoG0tg2SvMLNvov0E9YfNt0Z6SxubNRz1j33ccLc6kvDCw6nqoRCO2nMIjeTi3O5f9BRoAfdF5JnSzWxRee50T0XxfXpzd858twLAcqm4PJqcNJ9+TkybPDseNk6c637H4w/4npCdsztwfZky3TmanyXPedUcaCajyyNtYYrTvQ7zSJ/CH/BLp6q+mZxYMHgzPcelp9PubmNEQDqpduC7i75PPGclc0041bQoqtSFN2QoQW7JGorr1WPV5r2f75difk/8ETNIAOMBw3LkAAAAASUVORK5CYII=)
